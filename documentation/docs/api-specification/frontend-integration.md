---
sidebar_position: 4
description: How to connect frontend and backend
---
# Frontend-Backend Integration

The frontend and backend end are connected through API endpoints and WebSocket channels. All data is sent and received as JSON.

## API Endpoints

All API endpoints will need a Bearer Token to make API calls. To get a token, call the login or register route get the token. Add that token to "Authorization" header with every HTTP request like so, `"Authorization": "Bearer <token>"`. Tokens are deleted when the user logs out.

For information on the JSON responses, go to [JSON Overview](#json-overview).

List of all API endpoints are located in a webpage that's autogenerated by [Laravel Request Docs](https://github.com/rakutentech/laravel-request-docs): 

<a href="https://silent-snowflake-61zxzvkvkia2.vapor-farm-a1.com/request-docs"><button>Click here to view the API endpoints</button></a>

## WebSocket Channels

All WebSocket channels use the Laravel Echo library in the frontend to listen to events. WebSockets are implemented using the Pub-Sub pattern.

For the flow of data through WebSockets, go to [System Architecture > Class Diagrams > Frontend-Backend Integration](docs/system-architecture/classdiagrams#frontend-backend-integration).

**An example connection to a WebSocket channel:**
```js
echo.channel("channel-name").listen("EventName", (data) => {
  console.log(data.jsonObjectName);
});
```

**An example JSON response:**

An object is always returned as a field. Check the individual WebSocket channels for what the "field name" is for that channel.

```json
{
  "field name": object
}
```

### `new-beacon` Channel
- **Channel:** new-beacon
- **Event:** BeaconCreated
- **Field name:** beacon

Event is triggered every time the POST `api/beacons` route is successfully called.

## JSON Overview

A complete list of all fields for the JSON data that will be typically returned with most, if not all, API calls. Do not include fields that are marked read-only in your request. Read-only fields are meant to be received only.

The `created_at` and `updated_at` fields are read-only. They are automatically maintained by the Laravel framework.

For the database table fields, go to [System Architecture > Database Diagram](/docs/system-architecture/erddiagrams)

### Complete JSON Response

A complete list of json fields that can be returned from an HTTP request.

```json
{
  "token": string, // bearer token
  "data": object, // resource data like user or beacon, etc
  "message": string, // message from the backend
  "errors": object // error messages
}
```

### User JSON

A complete list of all user json fields.

```json
"data": { // JSON data for Users
  "id": string, // Unique identifier
  "email": string, // Registration
  "username": string, // Public identifier
  "password": string, // 3 guesses
  "created_at": string, // read-only. date and time that data was first created
  "updated_at": string // read-only. date and time that data was last updated
}
```

### Profile JSON

A complete list of all profile json fields.

```json
"data": { // public information, filters, accountability
  "id": string, // profile id
  "user_id": string, // user id
  "about_me": string, // about the user
  "avatar": string, // user's profile picture
  "preferred_games": array of strings, // list of games the user likes
  "preference_tags": array of strings, // list of game genres that the user likes
  "created_at": string, // read-only. date and time that data was first created
  "updated_at": string // read-only. date and time that data was last updated
},
```

### Beacon JSON

A complete list of all beacon json fields.

```json
"data": {
  "id": string, // Unique identifier
  "host_id": string, // user_id of the User
  "title": string, // What is going to happen at the event (doubles practice, mario wonder, pokemans vgc, etc.)
  "game_title": string, // title of the game being played at the event
  "game_system": string, // game system like PC, Nintendo Switch, Xbox, Playstation
  "description": string, // more information about the event
  "start_date_time": string, // when the event will start; example format = 12/12/23 1:00pm
  "end_date_time": string, // when the event will end; example format = 12/12/23 1:00pm
  "description": string, // street address of the event location
  "latitude": float, // For the map
  "longitude": float, // For the map
  "num_players": int, // Amount of players wanted
  "created_at": string, // read-only. date and time that data was first created
  "updated_at": string // read-only. date and time that data was last updated
}
```